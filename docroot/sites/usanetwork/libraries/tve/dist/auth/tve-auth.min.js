!function(a,b,c){"use strict";b.addTest("mobile-device",function(){return MobileEsp.isTierIphone||MobileEsp.isTierTablet}),a.module("tve.helper",[]).factory("helper",["$document","$sniffer","$log",function(d,e,f){function g(){this.storage=c.localStorage||c.sessionStorage}var h=1024,i=1e3,j={EST:-5,PST:-8},k={ANDROID_PHONE:"android_phone",ANDROID_TABLET:"android_tablet",IOS_PHONE:"ios_phone",IOS_TABLET:"ios_tablet",WINDOWS_PHONE:"windows_phone",WINDOWS_TABLET:"windows_tablet"},l={chrome:"chrome",ie:"explorer",safari:"safari",firefox:"firefox",opera:"opera",unknown:"unknown"},m=c.location,n=c.navigator,o=e.msie&&n.msPointerEnabled&&/Touch/g.test(n.userAgent)&&!MobileEsp.DetectWindowsPhone(),p=m.href.split("#").shift().split("?").shift().split("/").pop(),q="undefined"!=typeof n?n.userAgent:"";return b.addTest("tablet-win-device",function(){return o}),g.prototype.get=function(a){var b;try{b=JSON.parse(this.storage.getItem(a))}catch(c){f.log(c)}return b},g.prototype.set=function(a,b){try{this.storage.setItem(a,JSON.stringify(b))}catch(c){f.log(c)}return this},g.prototype.remove=function(a){var b;try{return b=JSON.parse(this.storage.getItem(a)),this.storage.removeItem(a),b}catch(c){f.log(c)}return b},{msie:e.msie,storage:new g,timezones:j,lastPathArg:p,deviceTypes:k,device:{touch:b.touch,isSurface:o,isMobile:MobileEsp.isTierIphone||MobileEsp.isTierTablet,isTablet:MobileEsp.isTierTablet,isDesktop:!MobileEsp.isTierIphone&&!MobileEsp.isTierTablet,isJustMobile:MobileEsp.isTierIphone},isRetina:function(){var a="(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)";return c.devicePixelRatio>1?!0:c.matchMedia&&c.matchMedia(a).matches?!0:!1}(),mobileDeviceType:function(){var a;switch(!0){case MobileEsp.isAndroid:a=MobileEsp.DetectAndroidPhone()?k.ANDROID_PHONE:k.ANDROID_TABLET;break;case MobileEsp.DetectIphoneOrIpod():a=k.IOS_PHONE;break;case MobileEsp.DetectIpad():a=k.IOS_TABLET;break;case MobileEsp.DetectWindowsPhone():a=k.WINDOWS_PHONE;break;case o:a=k.WINDOWS_TABLET}return a}(),breakpoints:{MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"},getTimeWithOffset:function(b,c){var d=36e5,e=6e4;b=b?a.isNumber(b)?b:j[b]||j.EST:j.EST,c=c||new Date;var f=d*b,g=c.getTime()+c.getTimezoneOffset()*e;return new Date(g+f)},getTimestampInSeconds:function(a){return parseInt((a||Date.now())/i,10)},getURLParameter:function(a,b){var c=(new RegExp(a+"=(.+?)(&|$)").exec(b||m.search)||[,null])[1];return c?decodeURI(c):c},toBoolean:function(b,c){if(b&&0!==b.length){var d=a.lowercase(String(b));b=!(!c&&"0"==d||"false"==d||"[]"==d)}else b=!1;return b},getRelativePath:function(a){return Drupal.settings.basePath+(a||"")},getCurrentBreakpoint:function(){return d.width()<h?this.breakpoints.MOBILE:this.breakpoints.DESKTOP},getDateFromSecondsTimestamp:function(a){return new Date(a*i)},toArray:function(b,c){var d=[];return a.forEach(b,function(a,b){var e={};e[c&&c.key?c.key:"id"]=b,e[c&&c.value?c.value:"value"]=a,d.push(e)}),d},findIndex:function(b,c){if(!b||!c)return-1;for(var d,e,f=(Object.keys(c).length,0),g=b.length;g>f;f++)if(d=!0,e=b[f],a.forEach(c,function(a,b){return e[b]!==a?d=!1:void 0}),d)return f;return-1},isMobile:function(a){return a=a||this.getCurrentBreakpoint(),a===this.breakpoints.MOBILE||a===this.breakpoints.TABLET},throttle:function(a,b){var c,d=0;return function(){function e(){d=Date.now(),b.apply(f,h)}var f=this,g=Date.now()-d,h=arguments;c&&clearTimeout(c),g>a?e():c=setTimeout(e,a-g)}},browser:function(){var a;return a=/chrome|crios|crmo/i.test(q)&&/^((?!(OPR)).)*$/i.test(q)?{name:l.chrome,chrome:!0}:/firefox|iceweasel/i.test(q)?{name:l.firefox,firefox:!0}:/safari/i.test(q)&&/^((?!(OPR)).)*$/i.test(q)?{name:l.safari,safari:!0}:/msie|trident/i.test(q)?{name:l.ie,msie:!0}:{name:l.unknown,unknown:!0}}()}}])}(angular,Modernizr,this),function(a){"use strict";function b(b,c){function d(d){function f(a){return b.open(a)}var g=c.getTop(),d=a.extend({windowClass:"tveModal",backdrop:!0,keyboard:!0,controller:["$scope","$modalInstance",function(a,b){a.$modalInstance=b}]},d);return g?g.key.result["finally"](function(){e=f(d)}):e=f(d),e}var e;return{getTop:c.getTop,open:d,showMobileAppModal:function(){return Drupal.settings.tveMobileWindow.enable?d({templateUrl:"mobileAppModal.html",windowClass:"mobileAppModal"}):void 0},openLiveModal:function(){return d({templateUrl:"liveModal.html",controller:"LiveModalCtrl",windowClass:"tveModal liveModal"})}}}b.$inject=["$modal","$modalStack"],a.module("tve.modal",[]).factory("tveModal",b)}(angular),function(a,b){"use strict";a.module("tve.errorHandler",["tve.helper","tve.modal"]).config(["$provide",function(a){var c=b.tve_auth;a.value("errorConfig",c.ajaxErrors?{}:c.data.published.additional.error_configs)}]).factory("tveErrorHandler",["$http","$log","helper","tveModal","errorConfig",function(a,b,c,d,e){function f(a,b){var c=b.url||b.error_image;a.errorWindow=b||{},c&&(a.errorWindow.errorImage={background:"url("+c+") no-repeat right bottom","background-size":"contain",right:"0px"})}function g(c){var g={templateUrl:"errorsModal.html",windowClass:"tveModal errorModal",controller:f,resolve:{config:function(){return e[c]}}};return e[c]?d.open(g):a.get(i+c).success(function(a){e[c]=a||{},d.open(g)}).error(function(){b.error("tveErrorHandler: ajax error")})}var h={FLASH:"flash",GENERAL:"general",ADOBE_PASS:"adobepass",MAC_SAFARI:"macsafari"},i=c.getRelativePath("tve/errors/modal/");return f.$inject=["$scope","config"],{errors:h,showErrorMessage:function(a){return c.device.isMobile?void 0:g(a||h.GENERAL)}}}])}(angular,Drupal.settings),function(a,b,c,d,e){"use strict";var f,g=d.tve_auth;a.module("tve.auth.services",[]),a.module("tve.auth.directives",["tve.filters"]),b(function(){a.element(document.body).append('<div id="adobePassIframeContainer" class="adobePassIframeContainer"></div>'),!g.isTve&&a.element(document.body).hasClass("auth2-pages")&&a.bootstrap(document.body,["tve.auth"])}),f=a.module("tve.auth",["ngCookies","ngSanitize","ngTouch","ngAnimate","ui.bootstrap.modal","pasvaz.bindonce","tve.helper","tve.modal","tve.errorHandler","tve.auth.services","tve.auth.directives"]),f.config(["$provide","$logProvider",function(a,b){var e=d.adobePass;b.enableDebug=!0,a.value("tveAuthConfig",{className:"tveModal"+(parseInt(g.version,10)>1?"Bx":""),disableAccessEnabler:Boolean(c.adobeClientlessApi),cookies:{FIRST_VISIT:"first_visit",FIRST_VISIT_LIVE_PAGE:"first_visit_live",NBCU_USER:"nbcu_user_settings",VERIFICATION:"nbcu_ap_loginpending",USERSELECTEDMVPD:"user_selected_mvpd"},viewMode:{PREVIEW:"preview"},events:{OPEN_WELCOME_WINDOW:"openWelcomeWindow"},path:{MVPD:"mvpd/"},entitlementTypes:{FREE:"free",AUTH:"auth"},MIN_FLASH_VERSION:e&&e.adobePassFlashVer||"10.1.13"}),a.value("tveConfig",{surf:{SESSION_KEY:"tveSurfSession"},events:{MEDIA_TICK_EVENT:"onMediaTick",LIVE_SCHEDULE_UPDATE:"updateLiveSchedule",UPDATE_SIZES:"updateSizes",CLOSE_EVENT:"close"},entitlementTypes:{FREE:"free",AUTH:"auth"},pages:{NODE:"node/"},path:{WIDGET_JSON:"widget/json/"},PLAYER_ID:"pdk-player",GETTING_STARTED_KEY:"isGettingStartedFlow"})}]).run(["$rootScope","tveErrorHandler","helper","tveAuthConfig","authService","tveModal",function(f,h,i,j,k,l){function m(){w?q(w):(i.device.isMobile||s(),o())}function n(){if(!i.device.isMobile){var a=e.swfobject,b=j.MIN_FLASH_VERSION;a&&!a.hasFlashPlayerVersion(b)&&h.showErrorMessage(h.errors.FLASH)}}function o(){k.isFirstVisit()&&(t(),(i.device.isMobile||i.device.isSurface)&&Drupal.settings.tveMobileWindow.enable?(f.$on(j.events.OPEN_WELCOME_WINDOW,p),r()):i.device.isMobile||z||p())}function p(){switch(g.behavior){case"auth":if(Drupal.settings.tve_cookie_detection){if(!Drupal.settings.tve_cookie_detection.completed)break;Drupal.settings.tve_cookie_detection.status?k.openLoginModal():l.open({controller:"ThirdPartyCookieCtrl",windowClass:"thirdPartyCookieNotify tveModal tveModalBx",templateUrl:"third-party-cookie-notification.html",keyboard:!0,backdrop:"static"})}else k.openLoginModal();break;case"orig":y.trackAuthEvents(y.events.ADOBE_PASS_LANDING),k.openWelcomeModal();break;case"none":break;default:y.trackAuthEvents(y.events.ADOBE_PASS_LANDING),k.openWelcomeModal()}}function q(a){switch(a){case"1":k.openWelcomeModal(!0);break;case"2":k.openLoginModal(!0)}}function r(){d.tveMobileWindow.enableAtFirstVisit&&l.showMobileAppModal()}function s(){var a,c,e="0"!=b.cookie(x.FIRST_VISIT_LIVE_PAGE);return d.tve_widget_live_preview_modal_window?void l.openLiveModal():void(d.enableLiveWindow&&e&&(d.displayFrequency?(a=d.displayFrequency*v,c=new Date(Date.now()+a)):(c=new Date,c.setMonth(c.getMonth()+1)),b.cookie(x.FIRST_VISIT_LIVE_PAGE,"0",{expires:c,path:d.basePath}),l.openLiveModal()))}function t(a){b.cookie(x.FIRST_VISIT,a||"0",{expires:u,path:d.basePath})}var u=365,v=36e5,w=i.getURLParameter("preview_step"),x=j.cookies,y=c.analytics?c.analytics:{trackAuthEvents:a.noop,events:{}},z="false"==i.getURLParameter("welcomemodal");j.disableAccessEnabler||(n(),m())}])}(angular,jQuery,tve,Drupal.settings,this),function(a,b,c,d){"use strict";a.module("tve.auth.services").provider("authService",function(){this.$get=["$http","$q","$cookies","$cookieStore","tveAuthConfig","helper","tveModal","tveErrorHandler",function(a,e,f,g,h,i,j,k){function l(){var a=Drupal.settings.tve_auth.data;t=a.published,u=a.draft}function m(){var a=d.swfobject,b=h.MIN_FLASH_VERSION;return a&&a.hasFlashPlayerVersion(b)?!0:!1}function n(a){var b=(a?u:t).welcome_window;return b?j.open({templateUrl:"welcomeModal.html",controller:"WelcomeModalCtrl",windowClass:"welcomeModal "+h.className,resolve:{data:function(){return b}}}):!1}function o(){return j.open({templateUrl:"k2modal.html",controller:"K2ModalCtrl",windowClass:"tveModal small k2Modal"})}function p(){function a(){return j.open({templateUrl:"adobePassModal.html",controller:"AdobePassCtrl",windowClass:"adobePassFrame "+h.className})}"undefined"!=typeof Drupal.settings.tve_cookie_detection?null==Drupal.settings.tve_cookie_detection.status||Drupal.settings.tve_cookie_detection.status?a():j.open({controller:"ThirdPartyCookieCtrl",windowClass:"thirdPartyCookieNotify tveModal tveModalBx",templateUrl:"third-party-cookie-notification.html",keyboard:!0,backdrop:"static"}):a()}function q(a,b){if(!h.disableAccessEnabler&&!i.device.isMobile&&!m())return void k.showErrorMessage(k.errors.FLASH);var c=a?u:t,d=c.login_window;return!i.device.isMobile||b&&b.skipMobileBehavior?r&&r.reopenMVPDWindow()?!1:d?j.open({templateUrl:"loginModal.html",windowClass:"loginModal "+h.className,controller:"LoginModalCtrl",resolve:{data:function(){return d.brand_logo=c.welcome_window.brand_logo,d},options:function(){return b}}}):!1:j.showMobileAppModal()}var r,s,t,u,v=e.defer(),w=h.cookies,x=Array.prototype,y=(x.push,x.concat,JSON.parse(b.cookie(w.NBCU_USER))),z=y&&y.authn,A=y&&y.selectedProvider;if("undefined"!=typeof Drupal.settings.tve_cookie_detection){Drupal.settings.tve_cookie_detection.status}s=c.mvpdService.getInstance(),h.disableAccessEnabler||(r=c.adobePass.getInstance({mvpdService:s,authNCheckedSuccessCallback:function(a){v.resolve(a)},authNCheckedFailedCallback:function(a){return m()?(k.showErrorMessage(navigator.userAgent.indexOf("Mac")>0&&navigator.userAgent.indexOf("Safari")>0&&-1==navigator.userAgent.indexOf("Chrome")?k.errors.MAC_SAFARI:k.errors.ADOBE_PASS),void v.reject(a)):void v.reject(a)},openAdobePassFrame:p})),l();var B={promise:v.promise.then(function(a){return z=a.isAuthenticated,A=a.mvpdId,a},function(){return{isAuthenticated:!1,mvpdId:null}}),isAuthenticated:function(){return z},getSelectedProvider:function(){return z?s.getMvpd(A):e.when(e.reject())},mvpdService:s,playAsset:function(a,b){var c="string"==typeof a,e=c?a:a.link,g=d.location,h="auth"===(c?b:a.entitlement);if(!h||!f.nbcu_ap_loginpending)return e&&(e=/http[s]?\:\/\//g.test(e)?e:g.protocol+"//"+g.hostname+e),h?i.device.isSurface||i.device.isDesktop?"undefined"==typeof Drupal.settings.tve_cookie_detection||Drupal.settings.tve_cookie_detection.status?z?void(d.location=e):void q(!1,{redirectUrl:e}):void j.open({controller:"ThirdPartyCookieCtrl",windowClass:"thirdPartyCookieNotify tveModal tveModalBx",templateUrl:"third-party-cookie-notification.html",keyboard:!0,backdrop:"static"}):void q(!1,{redirectUrl:e}):void(d.location=e)},isFirstVisit:function(){return"0"!=f[w.FIRST_VISIT]},authWithAdobePass:function(a,c){v.promise.then(function(){b.cookie(w.USERSELECTEDMVPD,a,{expires:1,path:Drupal.settings.basePath}),r.getAuthentication(c).setSelectedProvider(a)})},openWelcomeModal:n,openK2Modal:o,openLoginModal:q,openLoginIframeModal:p};return B}]})}(angular,jQuery,tve,this),function(a){"use strict";a.module("tve.auth.directives").directive("tveLoginButton",["$cookies","tveAuthConfig","authService","helper","tveModal",function(b,c,d,e,f){return{replace:!0,restrict:"EA",scope:{},template:'<a ng-href="{{currentProvider.mvpd_url}}"><img ng-if="isAuthenticated && currentProvider && !isRetina" ng-src="{{currentProvider.mvpd_color}}" /><img ng-if="isAuthenticated && currentProvider && isRetina" ng-src="{{currentProvider.mvpd_color_2x}}" /><i class="inlineLoader" tve-animated-png ng-show="verificationInProgress"></i><span ng-hide="isAuthenticated" ng-bind="text"></span></a>',link:function(g,h,i){function j(){h.on("click.login",function(){"undefined"!=typeof Drupal.settings.tve_cookie_detection&&0==Drupal.settings.tve_cookie_detection.status&&(e.device.isSurface||e.device.isDesktop)?f.open({controller:"ThirdPartyCookieCtrl",windowClass:"thirdPartyCookieNotify tveModal tveModalBx",templateUrl:"third-party-cookie-notification.html",keyboard:!0,backdrop:"static"}):d.openLoginModal()})}function k(){var b=569;if(q.width()>=b){var c=60;for(t.removeClass("visible"),u.removeClass("hidden"),l=r.offset().left-s.offset().left-s.width();c>=l;){var d=a.element(".mainHeaderLinks li:not(.hidden):last"),e=d.index();t.eq(e).addClass("visible"),d.addClass("hidden"),l=r.offset().left-s.offset().left-s.width()}}}var l,m,n=i.loadingClassName||"loading",o=!!b[c.cookies.VERIFICATION]||!b[c.cookies.FIRST_VISIT],p={"true":Drupal.t(i.verificationText?i.verificationText:"Verifying"),"false":Drupal.t(i.loginText?i.loginText:"Sign in")},q=a.element(window),r=a.element(".rightHeaderWrap"),s=a.element(".mainHeaderLinks"),t=a.element(".mainMenu .addedLinks li"),u=a.element(".mainHeaderLinks li"),v=r.length>0;g.isAuthenticated=d.isAuthenticated(),g.login=d.openLoginModal,g.verificationInProgress=o,g.text=p[o],g.isRetina=e.isRetina,g.isAuthenticated?d.getSelectedProvider().then(function(a){g.currentProvider=a}):o||j(),o&&h.addClass(n),v&&(q.on("resize",function(){clearTimeout(m),m=setTimeout(k(),500)}),k()),d.promise.then(function(a){function b(){o&&(h.removeClass(n),g.text=p[!1],g.verificationInProgress=!1)}h.off("click.login"),(g.isAuthenticated=a.isAuthenticated)?d.mvpdService.getMvpd(a.mvpdId).then(function(a){var c=g.currentProvider=a;h.addClass(i.mvpdLogoClassName?i.mvpdLogoClassName:"providerLogo").attr("target","_blank").find("img").attr({alt:c.title,title:c.title}),b()}):(g.currentProvider=null,j(),b(),g.text=p[!1]),v&&setTimeout(function(){k()},0)})}}}])}(angular),function(a,b){"use strict";a.module("tve.auth.directives").directive("tveLogoutButton",["authService",function(a){return{replace:!0,restrict:"EA",template:'<a ng-click="logout();" ng-show="visible" bindonce><span ng-bind="text"></span></a>',link:function(c){var d=Drupal.t("Sign out"),e=Drupal.t("Sign out from")+" ";c.visible=!1,c.logout=b.adobePass.logout,a.promise.then(function(b){b.isAuthenticated&&a.mvpdService.getMvpd(b.mvpdId).then(function(a){c.text=a.title?e+a.title:d,c.visible=!0})})}}}])}(angular,tve),function(a,b){"use strict";a.module("tve.auth.directives").directive("tveMvpdDropdown",["$filter","helper","$timeout",function(c,d,e){return{replace:!0,template:'<div class="tveDropdown tveMvpdDropdown" ng-class="{small: isSmall, disabled: disabled}"><div class="head"><span class="headLabel"><input type="text" ng-focus="scope.opened = true;" ng-keyup="searchmvpds();paginateSearchResults($event);" ng-model="mvpdSearchKey" placeholder="'+Drupal.t("Enter your provider's name")+'" /></span><div class="arrowWrap"><div class="arrow"></div></div></div><div class="menu"><div class="scrollWrap"><ul class="contentList"><li ng-repeat="option in options" ng-mouseover="hightlight($index);" ng-class="{selected: option[valueKey] === selected[valueKey]}" ng-click="select(option);"><a href="" ng-class="{highlight: $index == current}" ng-attr-title="{{option[labelKey]}}" ng-bind-html="option[labelKey]"></a></li></ul></div></div></div>',scope:{config:"=tveMvpdDropdown",value:"=ngModel",disabled:"=ngDisabled",change:"&",searchmvpds:"&",mvpdSearchKey:"="},require:"?ngModel",link:function(f,g,h,i){function j(a){switch(a.which){case 40:f.current=(f.current+1)%f.options.length;break;case 38:f.current=(f.current>0?f.current:f.options.length)-1;break;case 13:case 9:a.preventDefault(),q(f.options[f.current]);break;default:i.$setViewValue(!1)}if(f.current>5||0==f.current){var b=0==f.current?0:f.current-5,c=z.find("li").eq(b).position();r.scrollTo(parseInt(c.left),parseInt(c.top))}}function k(){var a,b,d={};return d[f.valueKey]=i.$viewValue,a=c("filter")(f.options,d),b=a&&a.length,(b?a:f.options)[0]}function l(b){var c=a.element(b.target);return p(),c.closest(g).length&&c.closest(".jspTrack").length||c.is("input")?void B.one("click.dropdown",l):void o()}function m(){var a;y.height((a=z.height())>u?u:a)}function n(){return r&&r.reinitialise()}function o(){C.off("resize.dropdown"),A.removeClass(v),g.removeClass(v),x.hide(t),D=!1,g.css("z-index",s)}function p(){B.off("click.dropdown",l)}function q(a){f.opened=!1,f.selected=a,i.$setViewValue(a[f.valueKey]),f.mvpdSearchKey=a[f.labelKey],o()}var r,s,t=0,u=200,v="opened",w=1e3,x=g.find(".menu"),y=x.children(),z=x.find(".contentList"),A=g.find(".head"),B=a.element(b),C=a.element(window),D=!1,E=!1,F={mouseWheelSpeed:30,verticalGutter:0,dragMinHeight:192,horizontalGutter:3,contentWidth:"0px"};i.$render=function(){E&&(f.selected=k())},f.isSmall=h.small,f.labelKey=h.tveMvpdDropdownLabel||"label",f.valueKey=h.tveMvpdDropdownValue||"key",f.select=q,f.paginateSearchResults=j,f.$watchCollection("config",function(b){b&&(f.current=-1,E=!0,f.options=a.isArray(b)?b:d.toArray(b),f.selected=k(),e(function(){m(),n()}))}),f.$watch("value",function(a,b){a!==b&&f.change()}),A.on("click.dropdown",function(a){a.preventDefault(),D||f.disabled||(A.find("input").focus(),s=g.css("z-index"),D=!0,g.css("z-index",w),g.addClass(v),x.show(t),m(),n()||(r=y.jScrollPane(F).data("jsp")),C.on("resize.dropdown",n),setTimeout(function(){B.on("click.dropdown",l)},0))}),f.hightlight=function(a){f.current=a}}}}])}(angular,document),function(a){a.module("tve.auth.directives").directive("tvePlayButton",["authService","$filter",function(a,b){var c=b("trackLink");return{replace:!0,template:'<span class="playButton" ng-click="trackLink(); play()"></span>',scope:{asset:"=tvePlayButton"},link:function(b,d,e){b.play=function(){a.playAsset.apply(null,b.asset?[b.asset]:[e.link,e.entitlement])},b.trackLink=function(){e.lnktrackName&&e.lnktrackLocation&&c(void 0,e.lnktrackLocation,e.lnktrackName)}}}}])}(angular),function(a){"use strict";a.module("tve.auth.directives").directive("tveAdobePassContainer",["tveModal","helper",function(b,c){return{link:function(d,e,f){if(c.device.isJustMobile)var g=0,h=a.element(document.getElementById(f.tveAdobePassContainer)),i="100%";else var g=50,h=a.element(document.getElementById(f.tveAdobePassContainer)),i=h.children().first().width()+g;h.show(),d.$on("$destroy",function(){h.hide()}),e.append(h).parent().width(i),b.getTop().key.result["finally"](function(){var a=document.createElement("div");a.id=a.className=f.tveAdobePassContainer,document.body.appendChild(a)})}}}])}(angular,jQuery),function(a){a.module("tve.auth").controller("WelcomeModalCtrl",["$scope","$modalInstance","authService","tveAuthConfig","data","tveModal",function(a,b,c,d,e,f){function g(){return b.close(),"undefined"!=typeof Drupal.settings.tve_cookie_detection&&0==Drupal.settings.tve_cookie_detection.status?f.open({controller:"ThirdPartyCookieCtrl",windowClass:"thirdPartyCookieNotify tveModal tveModalBx",templateUrl:"third-party-cookie-notification.html",keyboard:!0,backdrop:"static"}):void c.openLoginModal()}e=e||{errorMessage:Drupal.t("Sorry. Error occurred while becoming a content.")},a.welcomeWindow=e,a.goToLogin=g}])}(angular),function(a){"use strict";a.module("tve.auth").controller("LoginModalCtrl",["$scope","$q","$injector","$rootScope","$modalInstance","tveModal","authService","tveAuthConfig","helper","data","options",function(b,c,d,e,f,g,h,i,j,k,l){function m(c){var d=[],e=new RegExp("(?:\\s|^)"+c,"gi");return"undefined"==typeof c?!1:(a.forEach(b.mvpds.all,function(b){a.isArray(b.title.match(e))&&d.push(b)}),b.filteredMvpdList=d,b.mvpdListCentered=b.mvpds.featured.length<=.5*b.loginWindow.FEATURED_MVPD_MAX,!1)}function n(){var d=h.mvpdService,e=[h.promise];r.trackAuthEvents(r.events.MVPD_SELECTION),l.mvpdServiceConfig&&(d=h.mvpdService.addPlatform(l.mvpdServiceConfig),e.pop()),q=d.getMvpd(),e.push(q),h.promise.then(function(a){a.isAuthenticated&&b.$close()}),c.all(e)["finally"](function(){b.loadingMvpds=!1}),q.then(function(c){a.forEach(b.mvpds,function(a,b){Array.prototype.push.apply(a,c[b])}),b.filteredMvpdList=b.mvpds.all,b.mvpdListCentered=b.mvpds.featured.length<=.5*b.loginWindow.FEATURED_MVPD_MAX})}function o(a){var c;if(a){try{c=d.get("zendeskModal")}catch(e){}c&&c.openZenddeskFormModal()}b.$close()}function p(a){return a===!1||""==a?!1:(f.result.then(function(){h.authWithAdobePass(a,l.redirectUrl)}),void h.promise.then(function(){f.close()}))}var q,r=tve.analytics?tve.analytics:{trackAuthEvents:a.noop,events:{}};l=l||{},b.loginWindow=a.extend({FEATURED_MVPD_MAX:14},k),b.loadingMvpds=!0,b.mvpds={featured:[],all:[]},b.login=l.loginFunction?a.bind(null,l.loginFunction,f):p,b.clickHelperLink=o,b.isMobile=j.device.isJustMobile,b.isRetina=j.isRetina,b.provider={selected:""},b.searchMVPDS=m,b.filteredMvpdList={},n(),b.mvpdListCentered=b.mvpds.featured.length<=.5*b.loginWindow.FEATURED_MVPD_MAX}])}(angular),function(a,b){"use strict";a.module("tve.auth").controller("AdobePassCtrl",["$scope","$modalInstance",function(a,c){c.result["finally"](function(){b.adobePass.cancelAuthentication()})}])}(angular,tve),function(a){"use strict";a.module("tve.auth").controller("ThirdPartyCookieCtrl",["$scope","helper",function(a,b){var c=!b.device.isJustMobile&&!b.device.isTablet,d=b.device.isJustMobile||b.device.isTablet;a.browserName=b.browser.name,a.isChrome=c&&b.browser.chrome,a.isOpera=c&&b.browser.opera,a.isFirefox=c&&b.browser.firefox,a.isSafari=c&&b.browser.safari,a.isIE=c&&b.browser.msie,a.unknown=c&&b.browser.unknown,a.isMobChrome=d&&b.browser.chrome,a.isMobSafari=d&&b.browser.safari,a.isMobOther=d&&b.browser.unknown}])}(angular,tve);