<?php

/**
 * Implements hook_enable().
 * 
 * We need to set the weight of the usanetwork_gigya module so it runs after the
 * comment module, this way the hook_node_view() is gauranteed to run.
 */
function usanetwork_gigya_enable() {
  $result = db_query("SELECT weight FROM {system} WHERE name = 'comment'")
    ->fetchField();

  db_update('system')
    ->fields(array('weight' => $result + 1))
    ->condition('name', 'usanetwork_gigya')
    ->execute();
}
