<?php

/**
 * Implementation of hook_menu().
 */
function usanetwork_custompages_menu() {
  // games page
  $items['node/%node/games'] = array(
    'title' => t('Games'),
    'page callback' => 'usanetwork_custompages_games',
    'page arguments' => array(1),
    'access arguments' => array('access content'),
  );

  // quizzes page
  $items['node/%node/quizzes'] = array(
    'title' => t('Quizzes'),
    'page callback' => 'usanetwork_custompages_quizzes',
    'page arguments' => array(1),
    'access arguments' => array('access content'),
  );
  return $items;
}

/**
 * Quizzes custom page callback
 */
function usanetwork_custompages_quizzes($node) {
  $output = '';
  $arg = arg();
  $show_path = drupal_get_path_alias('node/'.$node->nid);

  // redirect to show page if its a invalid url
  if (!isset($arg[3]) || empty($arg[3])) {
    drupal_goto($show_path);
  }

  switch($show_path) {
    case 'covertaffairs':
      switch ($arg[3]) {
        case 'spottheaccent':
          $output = usanetwork_custompages_quizzes_spottheaccent($node);
        break;
      }
    break;
  }

  // redirect to show page if its a invalid url
  if (empty($output)) {
    drupal_goto($show_path);
  }

  return $output;
}

/**
 * Games custom page callback
 */
function usanetwork_custompages_games($node) {
  $output = '';
  $arg = arg();
  $show_path = drupal_get_path_alias('node/'.$node->nid);

  // redirect to show page if its a invalid url
  if (!isset($arg[3]) || empty($arg[3])) {
    drupal_goto($show_path);
  }

  switch($show_path) {
    case 'burnnotice':
      switch ($arg[3]) {
        case 'seeitlikeaspy':
          if (!isset($arg[4]) || empty($arg[4])) {
            drupal_add_css(drupal_get_path("module", "usanetwork_custompages")."/theme/css/seeit-likeaspy.css");
            $output = usanetwork_custompages_games_seeitlikeaspy($node);
          }
          else {
            switch ($arg[4]) {
              case 'money':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'money', 'spy_1.swf');
              break;
              case 'jammer':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'jammer', 'spy_2.swf');
              break;
              case 'gadgets':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'gadgets', 'spy_3.swf');
              break;
              case 'extinguisher':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'extinguisher', 'spy_4.swf');
              break;
              case 'listening':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'listening', 'spy_5.swf');
              break;
              case 'develop':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'develop', 'spy_6.swf');
              break;
              case 'compass':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'compass', 'spy_7.swf');
              break;
              case 'lifevest':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'lifevest', 'spy_8.swf');
              break;
              case 'microphone':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'microphone', 'spy_9.swf');
              break;
              case 'nightvision':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'nightvision', 'spy_10.swf');
              break;
              case 'metaldetector':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'metaldetector', 'spy_11.swf');
              break;
              case 'lasersignaller':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'lasersignaller', 'spy_12.swf');
              break;
              case 'airhorn':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'airhorn', 'spy_13.swf');
              break;
              case 'tripwire':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'tripwire', 'spy_14.swf');
              break;
              case 'ballpointpen':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'ballpointpen', 'spy_15.swf');
              break;
              case 'copier':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'copier', 'spy_16.swf');
              break;
              case 'recovertext':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'recovertext', 'spy_17.swf');
              break;
              case 'thumbprint':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'thumbprint', 'spy_18.swf');
              break;
              case 'lockcracker':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'lockcracker', 'spy_19.swf');
              break;
              case 'emergencyfuel':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'emergencyfuel', 'spy_20.swf');
              break;
              case 'periscope':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'periscope', 'spy_21.swf');
              break;
              case 'putty':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'putty', 'spy_22.swf');
              break;
              case 'audiospeaker':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'audiospeaker', 'spy_23.swf');
              break;
              case 'cutbottle':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'cutbottle', 'spy_24.swf');
              break;
              case 'glowstick':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'glowstick', 'spy_25.swf');
              break;
              case 'polishdvd':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'polishdvd', 'spy_26.swf');
              break;
              case 'toothpaste':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'toothpaste', 'spy_27.swf');
              break;
              case 'waterfilter':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'waterfilter', 'spy_28.swf');
              break;
              case 'carlock':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'carlock', 'spy_29.swf');
              break;
              case 'solarcooker':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'solarcooker', 'spy_30.swf');
              break;
              case 'batteryhack':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'batteryhack', 'spy_31.swf');
              break;
              case 'combinationlock':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'combinationlock', 'spy_32.swf');
              break;
              case 'smokebomb':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'smokebomb', 'spy_33.swf');
              break;
              case 'campfire':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'campfire', 'spy_34.swf');
              break;
              case 'secretstash':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'secretstash', 'spy_35.swf');
              break;
              case 'lockpicker':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'lockpicker', 'spy_36.swf');
              break;
              case 'diycandle':
                $output = usanetwork_custompages_games_seeitlikeaspy_game($node, 'diycandle', 'spy_37.swf');
              break;
            }
          }

        break;
        case 'jetski':
          $output = usanetwork_custompages_games_jetski($node);
        break;
        break;
      }
    case 'covertaffairs':
      switch ($arg[3]) {
        case 'dpdoffice':
          $output = usanetwork_custompages_games_dpdoffice($node);
        break;
      }
    break;
    case 'ncis':
      switch ($arg[3]) {
        case 'codename':
          $output = usanetwork_custompages_games_codename($node);
        break;
      }
    break;
    case 'psych':
      switch ($arg[3]) {
        case '80schallenge':
          $output = usanetwork_custompages_games_80schallenge($node);
        break;
        case 'office':
          $output = usanetwork_custompages_games_office($node);
        break;
        case 'findthepineapple':
          $output = usanetwork_custompages_games_findthepineapple($node);
        break;
      }
    break;
    case 'royalpains':
      switch ($arg[3]) {
        case 'beachcomber':
          $output = usanetwork_custompages_games_beachcomber($node);
        break;
        case 'operationhamptons':
          $output = usanetwork_custompages_games_operationhamptons($node);
        break;
      }
    break;
  }

  // redirect to show page if its a invalid url
  if (empty($output)) {
    drupal_goto($show_path);
  }

  return $output;
}


/**
 * Implements hook_theme().
 */
function usanetwork_custompages_theme($existing, $type, $theme, $path) {
  // @TODO: add variables, make these real theme functions
  return array(
   'seeitlikeaspy' => array(
      'path' => $path . '/theme',
      'variables' => array('data' => null),
      'template' => 'usa-seeitlikeaspy',
    ),
   'seeitlikeaspygames' => array(
      'path' => $path . '/theme',
      'variables' => array('data' => null,'swffile' => null),
      'template' => 'usa-seeitlikeaspygames',
    ),
    'jetski' => array(
      'path' => $path . '/theme',
      'template' => 'usa-jetski',
    ),
    'spottheaccent' => array(
      'path' => $path . '/theme',
      'template' => 'usa-spottheaccent',
    ),
    'dpdoffice' => array(
      'path' => $path . '/theme',
      'template' => 'usa-dpdoffice',
    ),
    'codename' => array(
      'path' => $path . '/theme',
      'template' => 'usa-codename',
    ),
    '80schallenge' => array(
      'path' => $path . '/theme',
      'template' => 'usa-80schallenge',
    ),
    'office' => array(
      'path' => $path . '/theme',
      'template' => 'usa-office',
    ),
    'findthepineapple' => array(
      'path' => $path . '/theme',
      'template' => 'usa-findthepineapple',
    ),
    'beachcomber' => array(
      'path' => $path . '/theme',
      'template' => 'usa-beachcomber',
    ),
    'operationhamptons' => array(
      'path' => $path . '/theme',
      'template' => 'usa-operationhamptons',
    ),

  );
}
/**
 * Covert affairs - Spot The Accent game callback
 */
function usanetwork_custompages_quizzes_spottheaccent($node) {
  drupal_set_title(t('Spot The Accent'));
  $output = '<div align= "center" style="width:924px; height:600px; background-color:#D3D3D3;" id="game" name="game"><b>SPOT THE ACCENT FLASH GAME COMES HERE</b></div>';
  return $output;
}

/**
 * Burn notice - See It Like A Spy game callback
 */
function usanetwork_custompages_games_seeitlikeaspy($node) {
  drupal_set_title(t('See It Like A Spy'));
  //$output = 'PASTE THE SEE IT LIKE A SPY GAME HTML HERE';
  return theme('seeitlikeaspy',  array('data' => $node));
}

/**
 * Burn notice - JetSki Getaway game callback
 */

function usanetwork_custompages_games_jetski($node) {
  drupal_add_js(drupal_get_path("module", "usanetwork_custompages")."/theme/js/swfobject.js");
  drupal_add_js(drupal_get_path("module", "usanetwork_custompages")."/theme/js/main.js");
  drupal_add_css(drupal_get_path("module", "usanetwork_custompages")."/theme/css/jetski.css");
  drupal_set_title(t('JetSki Getaway'));
  return theme('jetski');
}

/**
 * Covert affairs - Dpd Office game callback
 */

function usanetwork_custompages_games_dpdoffice($node) {
  drupal_set_title(t('Dpd Office'));
  $output = 'DPD OFFICE FLASH GAME COMES HERE';
  return $output;
}

/**
 * Ncis - Code Name game callback
 */
function usanetwork_custompages_games_codename($node) {
  drupal_set_title(t('Code Name'));
  $output = 'CODE NAME GENERATOR FLASH GAME COMES HERE';
  return $output;
}

/**
 * Psych - 80s Challenge game callback
 */

function usanetwork_custompages_games_80schallenge($node) {
  drupal_add_js(drupal_get_path("module", "usanetwork_custompages")."/theme/js/swfobject.js");
  drupal_set_title(t('80s Challenge'));
  return theme('80schallenge');
}

/**
 * Psych - Office game callback
 */

function usanetwork_custompages_games_office($node) {
  drupal_set_title(t('Office'));
  $output = 'OFFICE FLASH GAME COMES HERE';
  return $output;
}

/**
 * Psych - Find The Pineapple game callback
 */

function usanetwork_custompages_games_findthepineapple($node) {
  drupal_set_title(t('Find The Pineapple'));
  $output = 'FIND THE PINEAPPLE FLASH GAME COMES HERE';
  return $output;
}

/**
 * Royal Pains - Beach Comber game callback
 */

function usanetwork_custompages_games_beachcomber($node) {
  drupal_set_title(t('Beach Comber'));
  $output = 'BEACH COMBER FLASH GAME COMES HERE';
  return $output;
}

/**
 * Royal Pains - Operation Hamptons game callback
 */

function usanetwork_custompages_games_operationhamptons($node) {
  drupal_set_title(t('Operation Hamptons'));
  $output = 'OPERATION HAMPTONS FLASH GAME COMES HERE';
  return $output;
}

/**
 * Burn Notice  - See It Like A Spy games callback
 */

function usanetwork_custompages_games_seeitlikeaspy_game($node, $game_name, $swf_file_name) {
  drupal_add_js(drupal_get_path("module", "usanetwork_custompages")."/theme/js/swfobject.js");
  drupal_set_title(t('See It Like A spy'));
  return theme('seeitlikeaspygames',  array('data' => $node, 'swffile' => $swf_file_name));
}
