<?php
/**
 * @file
 * USA Network widgets
 */

/**
 * Implementation of hook_menu().
 */
function usanetwork_widget_menu() {
  $items['navbar'] = array(
    'page callback' => 'usanetwork_widget_navbar',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );
  $items['navbar/plain'] = array(
    'page callback' => 'usanetwork_widget_navbar_plain',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );
  $items['navbar/docs'] = array(
    'page callback' => 'usanetwork_widget_navbar_docs',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );
  $items['node/%node/navbar'] = array(
    'page arguments' => array(1),
    'page callback' => 'usanetwork_widget_show_navbar',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );
  $items['node/%node/navbar/plain'] = array(
    'page arguments' => array(1),
    'page callback' => 'usanetwork_widget_show_navbar_plain',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );
  $items['node/%node/navbar/docs'] = array(
    'page arguments' => array(1),
    'page callback' => 'usanetwork_widget_show_navbar_docs',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );

  return $items;
}

/**
 * Helper to generate and output the main menu bar
 */
function usanetwork_widget_navbar() {
  $pageURL = 'http';
  if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
  $pageURL .= "://" . $_SERVER["SERVER_NAME"];
  $widget_js_path = $pageURL .'/'. drupal_get_path('module', 'usanetwork_widget') . '/js/usanetwork_widget.js';
  echo '<script src="'.$widget_js_path.'"></script>';
  exit;
}

/**
 * Helper to generate and output the main menu bar in plain html
 */
function usanetwork_widget_navbar_plain() {
  $main_menu = module_invoke('usanetwork_blocks', 'block_view', 'usa_meganav');
  print $main_menu['content']['meganav']['#markup'];
  exit;
}

/**
 * Helper to generate the main menu documentation
 */
function usanetwork_widget_navbar_docs() {
  //TODO: Add the menu integration documentation here
  return 'Menu Documentation: Placeholder';
}

/**
 * Helper to generate and output the show menu bar
 */
function usanetwork_widget_show_navbar($node) {
  $show_menu = module_invoke('usanetwork_blocks', 'block_view', 'usa_tv_show_menu');
  return $show_menu['content'];
}

/**
 * Helper to generate and output the show menu bar in plain html
 */
function usanetwork_widget_show_navbar_plain($node) {
  $show_menu = module_invoke('usanetwork_blocks', 'block_view', 'usa_tv_show_menu');
  print $show_menu['content'];
  exit;
}

/**
 * Helper to generate the show menu documentation
 */
function usanetwork_widget_show_navbar_docs($node) {
  //TODO: Add the show menu integration documentation here
  return 'Show Menu Documentation: Placeholder';
}



